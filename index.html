<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Shopper</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#3B82F6">
    <meta name="description" content="Currency Converter & Shopping Assistant">
    <link rel="manifest" href="manifest.json">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    
    <!-- React and ReactDOM -->
    <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <style>
        .loading-spinner {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .js-loading {
            display: none;
        }
        
        .js-ready .js-loading {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Initial Loading Screen -->
    <div id="initial-loading" class="fixed inset-0 flex items-center justify-center bg-white z-50">
        <div class="text-center">
            <div class="loading-spinner w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full mx-auto"></div>
            <p class="mt-4 text-gray-600">Loading Global Shopper...</p>
        </div>
    </div>

    <!-- Main App Root -->
    <div id="root"></div>

    <!-- JavaScript Required Notice -->
    <div id="no-js-warning" class="fixed inset-0 flex items-center justify-center bg-white">
        <div class="text-center p-4">
            <h1 class="text-2xl font-bold text-gray-900 mb-4">JavaScript Required</h1>
            <p class="text-gray-600">Please enable JavaScript to use Global Shopper.</p>
        </div>
    </div>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>

    <!-- Initialize Lucide Icons -->
    <script>
        lucide.createIcons();
    </script>

    <script>
        // Remove no-js warning and show app when JavaScript is enabled
        document.getElementById('no-js-warning').style.display = 'none';
        document.body.classList.add('js-ready');
        
        // Remove loading screen once app is loaded
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('initial-loading').style.display = 'none';
            }, 1000);
        });
    </script>

    <!-- Your app script -->
    <script type="text/babel" src="app.js"></script>
</body>
</html>
